<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Devil x Posting</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #000;
      color: #fff;
    }
    header {
      background: linear-gradient(to right, #000, #111, #222);
      color: #fff;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 2px solid red;
    }
    .logo { font-size: 20px; font-weight: bold; color: red; }
    .nav button {
      background: red;
      border: none;
      color: #fff;
      padding: 8px 15px;
      margin-left: 8px;
      cursor: pointer;
      border-radius: 5px;
    }
    .nav button:hover { background: blue; }
    #feed {
      padding: 20px;
    }
    .post {
      background: #111;
      border: 1px solid #333;
      padding: 15px;
      margin-bottom: 15px;
      border-radius: 10px;
    }
    .post img {
      max-width: 100%;
      border-radius: 10px;
      margin-top: 10px;
    }
    .hidden { display: none; }
    .modal {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.8);
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      background: #111;
      padding: 20px;
      border-radius: 10px;
      width: 350px;
      color: #fff;
    }
    input, textarea {
      width: 100%;
      margin: 8px 0;
      padding: 8px;
      background: #222;
      border: 1px solid #444;
      border-radius: 5px;
      color: #fff;
    }
    .error { color: red; margin-top: 10px; }
  </style>
</head>
<body>
  <header>
    <div class="logo">Devil x PostingðŸ”¥</div>
    <div class="nav">
      <button onclick="showChannelForm()">Create Channel</button>
      <button onclick="editChannel()">My Channel</button>
      <button onclick="uploadPost()">+</button>
      <input id="searchInput" placeholder="Search channel username..." onkeyup="searchChannel()" style="padding:5px; margin-left:10px;">
    </div>
  </header>

  <div id="feed">
    <p id="noContent">NO CONTENT IS AVAILABLE</p>
  </div>

  <!-- Channel Modal -->
  <div id="channelModal" class="modal hidden">
    <div class="modal-content">
      <h3>Create Channel</h3>
      <input id="channelName" placeholder="Channel Name">
      <input id="channelUsername" placeholder="Channel Username (unique)">
      <button onclick="saveChannel()">Save</button>
      <button onclick="closeModal('channelModal')">Cancel</button>
      <p id="channelError" class="error"></p>
    </div>
  </div>

  <!-- Edit Channel Modal -->
  <div id="editChannelModal" class="modal hidden">
    <div class="modal-content">
      <h3>Edit Channel</h3>
      <input id="editChannelName" placeholder="New Channel Name">
      <input id="editChannelUsername" placeholder="New Channel Username">
      <button onclick="saveEditChannel()">Save</button>
      <button onclick="closeModal('editChannelModal')">Cancel</button>
    </div>
  </div>

  <!-- Upload Post Modal -->
  <div id="uploadModal" class="modal hidden">
    <div class="modal-content">
      <h3>Upload Post</h3>
      <textarea id="caption" placeholder="Write a caption..."></textarea>
      <input type="file" id="photo" accept="image/*">
      <button onclick="savePost()">Upload</button>
      <button onclick="closeModal('uploadModal')">Cancel</button>
      <p id="uploadError" class="error"></p>
    </div>
  </div>

  <script>
    let channel = null;
    let posts = [];

    function showChannelForm() {
      document.getElementById("channelModal").classList.remove("hidden");
    }

    function saveChannel() {
      let name = document.getElementById("channelName").value.trim();
      let username = document.getElementById("channelUsername").value.trim();
      if (!name || !username) {
        document.getElementById("channelError").innerText = "All fields are required!";
        return;
      }
      channel = { name, username };
      document.getElementById("channelError").innerText = "";
      closeModal("channelModal");
      alert("Channel created successfully!");
    }

    function editChannel() {
      if (!channel) {
        alert("No channel found. Please create a channel first!");
        return;
      }
      document.getElementById("editChannelModal").classList.remove("hidden");
    }

    function saveEditChannel() {
      let newName = document.getElementById("editChannelName").value.trim();
      let newUsername = document.getElementById("editChannelUsername").value.trim();
      if (newName) channel.name = newName;
      if (newUsername) channel.username = newUsername;
      closeModal("editChannelModal");
      alert("Channel updated successfully!");
    }

    function uploadPost() {
      if (!channel) {
        alert("PLEASE CREATE A CHANNEL FIRST");
        return;
      }
      document.getElementById("uploadModal").classList.remove("hidden");
    }

    function savePost() {
      let caption = document.getElementById("caption").value.trim();
      let fileInput = document.getElementById("photo");
      let imgURL = "";
      if (fileInput.files.length > 0) {
        imgURL = URL.createObjectURL(fileInput.files[0]);
      }
      if (!caption && !imgURL) {
        document.getElementById("uploadError").innerText = "Caption or Photo required!";
        return;
      }
      posts.unshift({ caption, imgURL, channel: channel.name });
      renderPosts();
      closeModal("uploadModal");
      document.getElementById("caption").value = "";
      fileInput.value = "";
    }

    function renderPosts() {
      let feed = document.getElementById("feed");
      feed.innerHTML = "";
      if (posts.length === 0) {
        feed.innerHTML = "<p id='noContent'>NO CONTENT IS AVAILABLE</p>";
        return;
      }
      posts.forEach(p => {
        let postDiv = document.createElement("div");
        postDiv.className = "post";
        postDiv.innerHTML = `<strong>${p.channel}</strong><p>${p.caption}</p>`;
        if (p.imgURL) {
          let img = document.createElement("img");
          img.src = p.imgURL;
          postDiv.appendChild(img);
        }
        feed.appendChild(postDiv);
      });
    }

    function searchChannel() {
      let query = document.getElementById("searchInput").value.trim().toLowerCase();
      let feed = document.getElementById("feed");
      if (!query) {
        renderPosts();
        return;
      }
      let filtered = posts.filter(p => channel && channel.username.toLowerCase().includes(query));
      feed.innerHTML = "";
      if (filtered.length === 0) {
        feed.innerHTML = "<p>No channel found with that username</p>";
      } else {
        filtered.forEach(p => {
          let postDiv = document.createElement("div");
          postDiv.className = "post";
          postDiv.innerHTML = `<strong>${p.channel}</strong><p>${p.caption}</p>`;
          if (p.imgURL) {
            let img = document.createElement("img");
            img.src = p.imgURL;
            postDiv.appendChild(img);
          }
          feed.appendChild(postDiv);
        });
      }
    }

    function closeModal(id) {
      document.getElementById(id).classList.add("hidden");
    }
  </script>
</body>
</html>